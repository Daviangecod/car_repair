<?php 

$basePath = dirname(__DIR__, 1);
require_once $basePath . "/config/settings.php";
require_once $basePath . "/config/mail.php";



if (!function_exists("siteName")) {
    function siteName()
    {
        return getConfig('site_name') ?? null;
    }
}

if (!function_exists("baseUrl")) {
    function baseUrl(string $path = null, array $query = null)
    {

        if ($path !== null && $query !== null) {
            $build = http_build_query($query);
            return getConfig('base_url') . "/" . $path . "?" . $build;
        } elseif ($path !== null) {
            return getConfig('base_url') . "/" . $path;
        }

        return getConfig('base_url');
    }
}


if (!function_exists("basePath")) {
    function basePath(string $path = null)
    {
        global $basePath;
        return $basePath . $path;
    }
}


if (!function_exists("middlewarePath")) {
    function middlewarePath(string $path = null)
    {
        return basePath("/middleware/" . $path);
    }
}



if (!function_exists("redirect")) {
    function redirect(string $to, array $query = null)
    {
        if ($query !== null) {
            $httpQuery = http_build_query($query);
            return header("Location: $to?$httpQuery");
        }
        return header("Location: $to");
    }
}


if (!function_exists("sendMail")) {
    function sendMail($to, $subject, $message)
    {
        if (function_exists('usePHPMailer')) {
            return usePHPMailer($to, $subject, $message);
        }
    }
}


if (!function_exists("mailTemplate")) {
    function mailTemplate($title, $greeting, $body)
    {

        $template =   <<<MESSAGE
               <!DOCTYPE html>
               <html lang="en">
               <head>
                   <meta charset="UTF-8">
                   <meta name="viewport" content="width=device-width, initial-scale=1.0">
                   <title>Message</title>
                   <style>

                        @font-face {
                            font-family: "DM Sans";
                            src: url('./assets/fonts/DM_Sans/DMSans-VariableFont_opsz\,wght.ttf');
                        }

                       body {
                           font-family: 'DM Sans',Arial, sans-serif;
                           background-color: #f4f4f4;
                           margin: 0;
                           padding: 0;
                           color: #333;
                       }
                       .container {
                           width: 100%;
                           max-width: 600px;
                           margin: 100px auto 0 auto;
                           background-color: #ffffff;
                           padding: 20px;
                           border-radius: 8px;
                       }
                       .header {
                           background-color: #404A76;
                           color: #ffffff;
                           padding: 10px;
                           text-align: center;
                           border-top-left-radius: 8px;
                           border-top-right-radius: 8px;
                           font-size: 8px;
                           letter-spacing: 5px;
                           text-transform: uppercase;
                       }
                       .body {
                           padding: 20px;
                           line-height: 1.6;
                       }
                       .footer {
                           background-color: #f4f4f4;
                           text-align: center;
                           padding: 10px;
                           border-bottom-left-radius: 8px;
                           border-bottom-right-radius: 8px;
                       }
                       .button {
                           display: inline-block;
                           margin: 0 auto;
                           padding: 10px 20px;
                           color: #ffffff;
                           background-color: #404A76;
                           text-decoration: none;
                           border-radius: 5px;
                       }

                       .button:hover{
                           background-color: #3a4267;
                        }
                   </style>
               </head>
               <body>
                       <div class="container">
                       <div class="header">
                            <div style="width:150px; margin: 20px auto;"> 
                                   <?xml version="1.0" encoding="UTF-8"?><svg style="fill:white;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 311 71"><path d="m59.1,36.22c-.46-.17-.86-.26-1.21-.26-.29,0-.52.09-.69.26l1.81,1.12-7.07,25.37c-1.15,2.24-2.27,3.36-3.36,3.36h-13.37v-14.84c.28-.23.62-.35,1.01-.35.28,0,.63.07,1.05.22.42.14.72.22.89.22.56,0,.82-.46.76-1.38.23-3.17,1.01-6.32,2.33-9.43.63-1.38.95-2.8.95-4.24,0-1.67-.4-3.34-1.21-5.02.17-.23.2-.46.09-.69-.12-.17-.17-.4-.17-.69.11-.12.26-.17.43-.17s.42.14.73.43c.32.29.65.46.99.52.17-.69-.2-1.41-1.12-2.16-.35-.29-.52-.55-.52-.78,0-.35.34-.66,1.04-.95-.63-.23-1.12-.84-1.47-1.82-.17-.52-.4-.78-.69-.78-.23,0-.49.17-.78.52l-1.04-3.55-7.51-.09-.17,11.15c-.58.46-1.06.69-1.47.69-.29,0-.52-.11-.69-.35-.52-.35-.78-.75-.78-1.21,0-.17.04-.38.13-.61.09-.23.13-.4.13-.52,0-.4-.23-.66-.69-.78-.86.52-1.58,1.64-2.16,3.37-.46,1.15-1.32,1.61-2.59,1.38-.58.86-.92,1.87-1.04,3.02-.17,1.44-.35,2.45-.52,3.03-.17.17-.69.38-1.55.6l-.26-.95c-.35.4-.52.81-.52,1.21,0,.17.06.39.17.65.11.26.17.47.17.65,0,.35-.17.69-.52,1.04-1.21.12-2.1.86-2.67,2.25.17.23.35.34.52.34.06,0,.23-.06.52-.17.23-.11.4-.11.52,0-.17.98-.35,2.07-.52,3.29-.12,1.21.26,2.19,1.12,2.94-.06.35-.06.66,0,.95.06.35,0,.64-.17.87.06.06.14.09.26.09.17,0,.37-.07.6-.22.23-.14.43-.22.6-.22s.32.03.43.09c.23.69.49,1.41.78,2.16.29.75.75,1.27,1.38,1.56.29-.4.43-.78.43-1.12s-.17-.66-.52-.95c-.63-.52-1.01-1.15-1.12-1.9-1.44.17-2.16-.43-2.16-1.82v-1.38l1.55-.17c.23-1.5.49-2.97.78-4.41.35-1.73,1.15-2.85,2.42-3.37l.26-.35c-.23-.17-.55-.06-.95.35l1.81-2.85,1.04,1.56c.81-1.15,1.84-3.11,3.11-5.88l2.16-.6v29.04c-.29.12-.43.38-.43.78.06.12.2.17.43.17v1.64h-.6v-.09c-2.07.17-4.2.23-6.38.17-2.19-.06-4.34-.09-6.47-.09.23-.11.43-.35.6-.69-1.78.63-3.77.89-5.95.78-2.19-.06-4.23-.09-6.13-.09-.17-.29-.26-.55-.26-.78,0-.29.13-.55.39-.78.26-.23.39-.43.39-.6,0-.29-.17-.6-.52-.95l-.17-56.94h44c1.84.75,3.11,2.99,3.8,6.73-.63.17-.92.35-.86.52-.12.23-.03.46.26.69l.95-.26c.98,3.34,1.81,6.93,2.5,10.78.86,2.07,1.78,5.41,2.76,10.01v1.73Zm-49.52,15.53c-.46-.34-.95-.95-1.47-1.81-.17-.4-.38-.6-.6-.6-.29,0-.58.29-.86.86.11.06.57.37,1.38.95.52.4,1.04.6,1.55.6Zm1.38,5.61c0-.8-.17-1.21-.52-1.21-.17,0-.4.1-.69.3-.29.2-.52.3-.69.3-.4,0-.69-.32-.86-.95.06.12.09.23.09.35,0,.17-.07.33-.22.47s-.22.27-.22.39.09.26.26.43h.43c.46-.23.83-.34,1.12-.34.46,0,.75.23.86.69l.43-.43Zm-1.21-3.97c-.46,0-.72.17-.78.52l.69.35.09-.86Zm1.81,5c-.29,0-.43.26-.43.78l1.38.09c-.23-.75-.55-1.04-.95-.86Zm2.5-15.62l-.26-.35c-.63.29-1.41.95-2.33,1.98.17.12.35.17.52.17.29,0,.66-.27,1.12-.82.46-.55.78-.88.95-.99Zm.78,8.71h.43c.63-.29.95-.6.95-.95l-.09-.35-1.29,1.29Zm3.19,8.11c.29-.86-.23-1.7-1.55-2.5-.58-.35-.86-.69-.86-1.04,0-.46.43-.95,1.29-1.47-.06-.17-.23-.32-.52-.43-.4.12-.69.23-.86.35-.4.46-.6.86-.6,1.21,0,.29.14.49.43.6.57.4,1.04.95,1.38,1.64.23.17.4.49.52.95.11.46.37.69.78.69Zm6.3-11.13c.34-.69.11-1.12-.69-1.29-.46.4-.69,1.15-.69,2.24-.4.69-.98,1.15-1.73,1.38,0,.81.49,1.7,1.47,2.67.4-.52.72-1.37.95-2.54.23-1.18.46-2,.69-2.46Zm-2.16-25.71c-.12-.23-.17-.46-.17-.69l-.26,1.21.43-.52Zm3.88,39.34v-.78l-.86-.26c-.29-.29-.55-.43-.78-.43-.12,0-.32.12-.6.35-.29.23-.58.35-.86.35h.35c.92.17,1.26.55,1.04,1.12.23-.23.8-.35,1.73-.35Zm-2.33-7.16c-.06.06-.23-.17-.52-.69-.12,0,.06.12.52.34v.35Zm1.81-3.54c0-.92-.03-1.41-.09-1.47h-.26l.34,1.47Zm2.07-39.21c-.35.52-.52.92-.52,1.2,0,.17.09.26.26.26.23-.34.35-.66.35-.94,0-.17-.03-.34-.09-.52Zm.09-.74c-.23-.11-.38-.14-.43-.09-.06.06-.03.23.09.52,0-.06.11-.2.35-.43Zm6.13,2.21c-.63,0-1.38-.52-2.24-1.55l-.43,2.67c.11.12.27.33.47.65.2.32.39.47.56.47.11,0,.26-.03.43-.09.8-.46,1.21-1.18,1.21-2.16Zm-1.9,5.64v-.26h-.17l.17.26Zm16.91-11.56h-10.09v9.17c.8.06,1.61.14,2.42.26.8.11,1.44.49,1.9,1.11l.09-.09c0-.4-.1-.79-.3-1.16-.2-.37-.3-.7-.3-.99,0-.46.2-.77.6-.94.11-.11.17-.26.17-.43,0-.34-.35-.77-1.04-1.29.92-.63,1.5-1.26,1.73-1.89l-1.55-.43c2.01-.68,4.14-1.8,6.38-3.34Zm-7.59,13.89l-.26.69.09-.09.17-.6Zm2.16,15.01h-.17l-1.21,1.29,1.38-1.29Zm2.85-8.8c-.12-.23-.23-.34-.35-.34s-.23.17-.35.52c-.12.63-.32,1.04-.6,1.21h.35c.63-.23.95-.69.95-1.38Zm.09,7.16c-.17-.23-.49-.52-.95-.86.17.17.29.4.35.69.06.29.11.43.17.43.11-.06.26-.14.43-.26Zm1.73-11.3c0-.29-.17-.55-.52-.78-.35-.23-.66-.46-.95-.69-.46.17-.72.49-.78.95-.06.69-.12,1.12-.17,1.29,1.09.12,1.9-.14,2.42-.78Zm2.24,4.14c-1.09-.52-2.33-1.18-3.71-1.98l-.26.52c.86.4,2.19.89,3.97,1.47Zm-2.07,4.06c-.17.58-.23.89-.17.95,0-.11.06-.43.17-.95Zm.17,6.9l.09.35.26-.35h-.35Zm2.59-22.76c-.46-.46-.78-.69-.95-.69-.23,0-.49.12-.78.35,0,.35-.03.66-.09.95,0,.35.14.6.43.78,0-.63.11-1.01.35-1.12.69.23,1.04.29,1.04.17v.78h.26c0-.06.17-.23.52-.52-.06,0-.32-.23-.78-.69Zm2.16,3.77l-1.29-1.21c-.58.23-.86.52-.86.86,0,.12.04.27.13.47.09.2.13.36.13.47,0,.29-.12.52-.35.69-.06,0-.43-.11-1.12-.35-.06.4.2.89.78,1.47.98.17,1.61-.03,1.9-.6-.17-.11-.26-.26-.26-.43,0-.11.14-.3.43-.56.29-.26.46-.53.52-.82Zm-1.98,10.27l-.86,2.76c.63-1.5.95-2.21.95-2.16,0-.23-.03-.43-.09-.6Zm3.8,5.61l-3.62-.26c.23.46.6.69,1.12.69.11,0,.3-.03.56-.09.26-.06.47-.09.65-.09.46,0,.8.2,1.04.6l.26-.86Zm-2.59,4.06c0,.81.23,1.12.69.95l.35-.43c-.4-.52-.75-.69-1.04-.52Zm1.38-17.08c-.12.12-.33.2-.65.26-.32.06-.47.17-.47.34,0,.06.03.14.09.26h.35c.29,0,.52-.29.69-.86Zm1.55,18.98c-.23-.4-.63-.95-1.21-1.64l-.17.43c.23.17.39.45.47.82.09.37.22.56.39.56.11,0,.29-.06.52-.17Zm-.6,4.23c-.17-.52-.2-.78-.09-.78l-.34,1.12.43-.35Z"/><path d="m114.06,21.12h-19.76c-.75,2.99-1.9,7.45-3.45,13.37-1.44-.06-2.33-.6-2.67-1.64v-.78c.52,0,.81-.06.86-.17-.52.12-1.01-.11-1.47-.69-.23-.23-.4-.35-.52-.35-.17,0-.26.26-.26.78-.12.23-.36.46-.73.69-.38.23-.53.49-.47.78.57.12.86.37.86.78,0,.35-.14.75-.43,1.21,0,.23.06.4.17.52l1.55-1.47c.17.12,1.09.46,2.76,1.04.92,3.91,2.19,9.84,3.8,17.77v13.03l-18.89.09c-1.21-.46-2.13-1.47-2.76-3.02l-3.71-13.03c.23-.17.52-.49.86-.95-.17-.11-.33-.09-.47.09-.14.17-.3.23-.47.17-.58-2.76-1.38-5.46-2.42-8.11-.75-1.73-1.12-3.57-1.12-5.52,0-.92.09-1.87.26-2.85l6.47-24.42c.69-1.09,1.61-1.9,2.76-2.42h25.11c.23.4.55.75.95,1.04l.34-1.04h7.77c0,.75-.32,1.73-.95,2.93-.52.17-.83.32-.95.43,0,1.04.49,1.98,1.47,2.85.63-.57,1.06-1.52,1.29-2.85.34-1.73.57-2.76.69-3.11-.17-.11-.29-.14-.35-.09.52-.17,1.12-.26,1.81-.26.69.06,1.38.09,2.07.09v15.1Zm-44.95,13.11c-.75-.06-1.32.3-1.73,1.08-.4.78-.75,1.54-1.04,2.29.29.12.56,0,.82-.35.26-.34.44-.55.56-.6-.17-.46-.02-.86.47-1.21.49-.35.79-.75.91-1.21Zm-.86,9.32v-.43c-.23-.11-.39-.37-.47-.78-.09-.4-.33-.55-.73-.43l1.21,1.64Zm4.14-13.72c-1.04,1.15-1.7,2.1-1.98,2.85,1.32-.92,1.98-1.87,1.98-2.85Zm2.16,15.44c-.86.17-1.42-.16-1.68-.99-.26-.83-.76-1.34-1.51-1.51-.17.58-.09,1.21.26,1.9.35.69.52,1.18.52,1.47,0,.35-.09.66-.26.95.23-.17.43-.26.6-.26.11,0,.26.16.43.47.17.32.4.47.69.47l-.78-1.12c.35-.17.69-.33,1.04-.47.35-.14.57-.44.69-.91Zm3.71,5.95c.11-.4-.23-.6-1.04-.6.11.86.32,1.29.6,1.29.29-.06.43-.29.43-.69Zm2.5,1.81c-.63-.4-1.01-.6-1.12-.6l.34,1.04c.52,0,.78-.14.78-.43Zm.26-30.46h.78c0-.11.14-.37.43-.78l-1.21.78Zm.95,25.8c-.46,0-.72.09-.78.26l.78.69v-.95Zm.6,6.13c-.63-.98-.98-1.55-1.04-1.73.06.06-.06.14-.35.26.23.12.4.4.52.86.12.46.4.66.86.6Zm-.6,4.14c-.12-.35-.17-.57-.17-.69s.03-.17.09-.17l-.34.95.43-.09Zm3.11.86c-.34,0-.49.03-.43.09l.09.52c-.86.86-1.47,1.18-1.81.95v.26l1.12.09c.06-.06.4-.69,1.04-1.9Zm-1.04-3.28c-.29.17-.43.35-.43.52,0,.23.11.46.34.69.06,0,.32-.32.78-.95,0-.17-.23-.26-.69-.26Zm1.47-9.58c-.35-.17-.86-.49-1.55-.95,0,.46.52.78,1.55.95Zm-.17,17.77l-.34.78c.23,0,.34-.26.34-.78Zm5.18-6.73l-4.31-.69c.06.46.26,1.21.6,2.24.11-.06.52-.37,1.21-.95.52-.4.92-.6,1.21-.6s.6.12.95.34l.35-.34Zm-.17,3.02c0-.06-.14-.23-.43-.52-.29-.29-.49-.6-.6-.95l1.04,1.47Zm.86-2.67l-.35.69c.12.06.2.09.26.09l.43-.17c-.06.06-.17-.14-.34-.6Zm4.31-47.54c-.46-.35-.92-.95-1.38-1.81-.23-.4-.43-.6-.6-.6-.29,0-.58.29-.86.86.52.46,1.47.98,2.85,1.55Zm18.29,55.56h-15.18l-.17-7.51c-.06-2.59.03-5.12.26-7.59h14.93l.17,12.51-.52.17c.46.52.63.92.52,1.21-.29-.11-.55-.17-.78-.17-.35,0-.66.12-.95.35.17.17.57.29,1.21.35.46,0,.63.23.52.69Zm-11.73-57.12c.29.81-.17,1.27-1.38,1.38.23.35.55.92.95,1.73-.63.23-1.04-.06-1.21-.86-.12-.4-.29-.6-.52-.6-.17,0-.43.17-.78.52-.35-.17-.52-.55-.52-1.12.4,0,.83.23,1.29.69l2.16-1.73Zm.26,47.28c-.69-.4-1.76-.86-3.19-1.38,1.15,1.09,2.21,1.55,3.19,1.38Zm-1.47-40.81l-.35.95h.26c.06-.11.09-.43.09-.95Zm3.11,2.93c.29-.92-.23-1.78-1.55-2.59-.58-.29-.86-.63-.86-1.04,0-.46.46-.92,1.38-1.38,0-.29-.14-.43-.43-.43-.23,0-.58.12-1.04.34-.4.46-.6.86-.6,1.21,0,.17.26.45.78.82.52.37.86.79,1.04,1.25.17.17.32.58.43,1.21.11.4.4.6.86.6Zm7.94,46.68c-.34-.57-.92-.89-1.73-.95-.81-.06-1.58-.11-2.33-.17l-1.04.69c.34-.06.78-.09,1.29-.09,1.04,0,2.3.17,3.8.52Zm.09-44.26v-.86c-.81-.06-1.41-.29-1.81-.69-.58.46-1.04.69-1.38.69.46,0,.95.19,1.47.56.52.37,1.09.47,1.73.3Zm-2.24-7.16v-.26c-.17,0-.29-.09-.35-.26-.06-.17-.14-.26-.26-.26.06.06.12.22.17.47.06.26.2.36.43.3Zm1.81-3.62c0-.75-.06-1.21-.17-1.38h-.26l.43,1.38Z"/><path d="m158.75,21.12h-4.83c-1.84,7.54-3.34,15.53-4.49,23.99v20.97l-25.37.35c.12-2.42.09-5.61-.09-9.58-.17-4.77-.26-7.99-.26-9.66,0-4.31.57-8.43,1.73-12.34.4-.23.98-.4,1.73-.52.75-.11,1.29-.4,1.64-.86l-1.98-2.76c-.29-.4-.43-.86-.43-1.38s.17-1.06.52-1.64c1.5-.8,2.7-1.21,3.62-1.21.17.12.32.17.43.17.17,0,.35-.09.52-.26,0-.4-.21-.6-.65-.6s-.62-.23-.56-.69c.29-.11.57-.17.86-.17.52,0,1.09.37,1.73,1.12.8.98,1.38,1.58,1.73,1.81.29-.23.92-.46,1.9-.69.63-.11.95-.57.95-1.38-.17-.06-.34-.09-.52-.09-.23,0-.5.06-.82.17-.32.12-.53.17-.65.17-.34,0-.55-.29-.6-.86.46-.23.69-.43.69-.6,0-.11-.14-.26-.43-.43-.75-.23-1.12-.6-1.12-1.12-.06-.29-.09-.55-.09-.78,0-.86.49-1.47,1.47-1.81.63-.11,1.05.13,1.25.73.2.6.56.91,1.08.91.23-.06.35-.29.35-.69l-.52-.52c.52-.35.8-.92.86-1.73,0-.75-.03-1.44-.09-2.07-2.24.92-4.52,1.81-6.82,2.67-2.47,1.15-3.8,2.96-3.97,5.44.63-3.57,1.7-8.92,3.19-16.05.69-1.9,1.73-2.93,3.11-3.11h14.41c-.17.23-.6,1.15-1.29,2.76-.46,1.15-1.04,1.94-1.73,2.37-.69.43-1.61,1.17-2.76,2.2l-.43,4.14c.34.46.92.69,1.73.69s1.29.14,1.47.43c.29.46.83.72,1.64.78.63.06,1.01.4,1.12,1.04-.23.17-.63.63-1.21,1.38-.4.52-.89.78-1.47.78-.12-.06-.34-.23-.69-.52.06.58-.2,1.12-.78,1.64-.75.63-1.21,1.12-1.38,1.47.63-.23,1.67-.37,3.11-.43-.17-.75.4-1.58,1.73-2.5h.43c1.15-2.3,1.73-3.62,1.73-3.97s-.09-.66-.26-.95l.6-.52c-.58-.23-.92-.62-1.04-1.16-.12-.55-.23-1.08-.34-1.6-.06-.35-.29-.86-.69-1.55-.4-.69-.6-1.24-.6-1.64,0-.35.06-.72.17-1.12.8-.8,1.29-1.21,1.47-1.21.11,0,.26.06.43.17.34.4.69.63,1.04.69.06-.23.26-.57.6-1.04l.86.6c.11-.35.06-.7-.17-1.08-.23-.37-.34-.62-.34-.73,0-.29.29-.49.86-.6.4,0,.6-.03.6-.09v-.43h6.13v15.1Zm-23.21,17.69h-.17v.52c.11-.11.17-.29.17-.52Zm5.69-7.28c0,.06-.2.4-.6,1.04-.29.35-.4.69-.34,1.04.8-.8,1.12-1.5.95-2.07Zm7.16,11.08v-2.16c0-.23-.16-.49-.47-.78-.32-.29-.59-.43-.82-.43-.29,0-.43.26-.43.78.57.17.93.58,1.08,1.21.14.63.36,1.09.65,1.38Zm3.28-36.59c0,.29-.03.43-.09.43l-.6-.43h.69Zm27.52,57.04c-.63.63-1.12.89-1.47.77l-.69-.34c-.34,2.01-1.27,3.01-2.76,3.01-.4,0-1.05-.09-1.94-.26-.89-.17-1.6-.26-2.11-.26-.92,0-1.75.12-2.5.34.17-.4.06-.75-.35-1.04-.58-.29-.92-.57-1.04-.86-.12-1.5.37-2.42,1.47-2.76.63,0,1.12.34,1.47,1.04.17.4.4.6.69.6.23,0,.46-.09.69-.26l-.69-.95c.75-.29,1.19-.82,1.34-1.6.14-.78.24-1.54.3-2.29-.52-.06-1.04.12-1.55.52-.69.46-1.24.72-1.64.78l-5.61,1.98-.17-17.95-8.46-.09c.69-3.32,1.61-8.32,2.76-15.01h5.69l.35-15.01c.17.06.3.17.39.35.09.17.16.26.22.26.11,0,.26-.09.43-.26-1.04-.81-1.44-1.96-1.21-3.45.11-.81.17-1.58.17-2.33,0-.63-.06-1.26-.17-1.9.63.12,1.35.09,2.16-.09.75-.11,1.29.17,1.64.86.06.52.46,1.24,1.21,2.16.12-.34.17-.72.17-1.12,0-.35-.06-.69-.17-1.04l-.26-.78c.98.17,1.98.26,3.02.26s2.1-.09,3.19-.26c2.13-.29,3.68.72,4.66,3.02l.78,1.81v39.9c-.46.63-1.32,1.41-2.59,2.32,0,.12-.35,2.15-1.04,6.11.23.29.49.43.78.43.11,0,.27-.06.47-.17.2-.11.36-.17.47-.17.29,0,.43.26.43.77.98.06,1.47,1.03,1.47,2.93Zm-7.07-14.68c-.4-.4-.75-.6-1.04-.6s-.52.17-.69.52c-.35.69-.81,1.06-1.38,1.12.29-.29.89-.4,1.81-.35.75,0,1.18-.23,1.29-.69Zm-1.12-29.33c-.46-.46-.86-.69-1.21-.69l.17.95h.43c.34,0,.55-.09.6-.26Zm1.12-3.62v-1.12c-.58,0-.86.17-.86.52l.86.6Zm-.52,3.19c-.06.12-.09.26-.09.43,0,.98.32,1.47.95,1.47l.34-.09-1.21-1.81Zm.52,6.13v-1.04l-.35,1.12.35-.09Zm0,18.04l-.26-.78-.09,1.12.35-.35Zm.69-16.75c-.12-.23-.2-.35-.26-.35-.12.06-.17.37-.17.95.11.52.32.78.6.78l.34-.09c-.12-.23-.29-.66-.52-1.29Zm6.38,40.29h-2.59c.17-.06.66-.17,1.47-.34-.12-1.09.2-1.81.95-2.16l.17,2.5Z"/><path d="m225.36,21.12h-11.04c.11.35.17.69.17,1.04,0,.75-.29,1.35-.86,1.81-.86.75-1.38,1.58-1.55,2.5.11,0,.83-.66,2.16-1.98v41.59c-.92-.11-1.93-.11-3.02,0-1.09.17-1.9-.11-2.42-.86-.29,0-.6.12-.95.35-.52.29-.86.46-1.04.52h-17.69V28.03c1.09-.63,1.32-1.26.69-1.9l-.34-.34c0,.06-.04.13-.13.22-.09.09-.13.19-.13.3l-.09-20.28h25.54c-1.15,1.67-2.88,2.96-5.18,3.88-2.07.75-4.17,1.5-6.3,2.24-.86.75-1.52,1.83-1.98,3.24-.46,1.41-1.09,2.46-1.9,3.15-.17,1.38-.95,2.21-2.33,2.5-1.61.29-2.67.95-3.19,1.98l.34.35c-.29.23-.6.68-.95,1.34-.35.66-.75,1.05-1.21,1.16-.17,0-.4-.09-.69-.26-.29-.11-.46-.03-.52.26v.52c1.38-.06,3.33.23,5.87.86.17-.06,1.84-.52,5-1.38.69.46,1.41.69,2.16.69.4,0,.78-.06,1.12-.17.34-.11.52-.34.52-.69s-.12-.75-.34-1.21c-.46.23-.92-.06-1.38-.86-.23.52-.62.72-1.17.6-.55-.11-.94.06-1.16.52-1.61-1.15-2.3-2.7-2.07-4.66,1.26-1.15,2.65-1.67,4.14-1.55.11.06.23.09.35.09.17,0,.34-.09.52-.26,0-.4-.12-.62-.35-.65-.23-.03-.45-.04-.65-.04s-.27-.2-.22-.6c.34-.11.63-.17.86-.17.52,0,1.09.37,1.73,1.12.8.98,1.38,1.58,1.73,1.81,1.38-.4,3.39-1.09,6.04-2.07-.4.23-.86.35-1.38.35-.29,0-.71-.09-1.25-.26-.55-.17-.99-.26-1.34-.26-.46,0-.95.12-1.47.35-.29-.17-.38-.43-.26-.78.46-.17.69-.35.69-.52s-.17-.35-.52-.52c-.75-.29-1.12-.66-1.12-1.12-.23-1.38.23-2.3,1.38-2.76.57,0,1.12.4,1.64,1.21.23.46.49.69.78.69.23,0,.49-.23.78-.69-.52-.06-.86-.26-1.04-.6.17-.86.78-1.21,1.81-1.04.75.12,1.12-.14,1.12-.78,0-.29-.09-.63-.26-1.04.4-.35.83-.52,1.29-.52.23,0,.59.12,1.08.35.49.23.93.34,1.34.34.34,0,.69-.06,1.04-.17.17.75.66,1.16,1.47,1.25.8.09,1.32.42,1.55.99-.34.52-.72,1.04-1.12,1.55-.4.52-.92.72-1.55.6-.06,0-.29-.11-.69-.35.06.58-.2,1.12-.78,1.64-.75.63-1.21,1.12-1.38,1.47.4.12.96.04,1.68-.22.72-.26,1.25-.39,1.6-.39-.06-.11-.09-.26-.09-.43,0-.57.55-1.21,1.64-1.9.29.23.55.35.78.35.34,0,.63-.32.86-.95,0-.29.43-.78,1.29-1.47.29-.11.66-.14,1.12-.09.4.06.8.06,1.21,0v9.06Zm-33.39,22.69c-.12-.4-.32-.66-.6-.78,0,.52.2.78.6.78Zm3.36-30.8c-.06-.06-.14-.09-.26-.09-.17,0-.26.17-.26.52.12-.06.26-.06.43,0,.06-.06.09-.2.09-.43Zm4.31-.17l-.95-1.38-.17.09,1.12,1.29Zm1.29-1.64v-.52c-.17-.23-.32-.35-.43-.35-.17,0-.26.26-.26.78.06-.06.29-.03.69.09Zm.43,35.46l-1.12,1.21.43-.09.69-1.12Zm1.38.26c0-.11-.17-.26-.52-.43l.52.43Zm8.11-18.98c-.86,0-1.45.39-1.77,1.16-.32.78-.65,1.54-.99,2.29.34.06.63-.06.86-.35.23-.29.43-.46.6-.52-.06-.17-.09-.35-.09-.52,0-.23.23-.52.69-.86.46-.35.69-.75.69-1.21Zm1.9,16.48c-.81-.69-1.58-1.04-2.33-1.04-.52,0-1.01.14-1.47.43.06.63.29,1.21.69,1.73.8.17,1.84-.2,3.11-1.12Zm.69-6.56l-1.64-.09-2.59,1.04,4.23-.95Zm32.35,10.96c-1.32,1.44-3.26,2.49-5.82,3.15-2.56.66-4.47,1.68-5.74,3.06h.17v.26h-.17c-.06,0-.09-.03-.09-.09,0-.17.06-.34.17-.52.11-.17.14-.29.09-.35-.06-.06-.23-.06-.52,0-.23.29-.33.69-.3,1.21.03.52-.22.81-.73.86.17.12.2.35.09.69.12.12.23.2.35.26-.63.86-1.41,2.24-2.33,4.14-.46.23-.98.52-1.55.86l-.17-18.55-10.53-.09v-15.19h10.7c-.06-2.93.06-7.3.34-13.11-.29-1.5-.4-3.05-.34-4.66l.17-4.75,12.08.26c1.73.69,2.9,1.58,3.54,2.67.06.29.17.78.34,1.47.17.69.26,1.24.26,1.64-.29-.17-.52-.44-.69-.82-.17-.37-.4-.62-.69-.73-.35.23-.52.4-.52.52s.14.27.43.47c.29.2.43.45.43.73l1.04.52v2.93c0,1.21-.26,2.07-.78,2.59-.06.29.2.69.78,1.21-.23,1.32-.34,2.67-.34,4.05,0,.63.07,1.52.22,2.67.14,1.15.22,2.01.22,2.59,0,2.36-1.21,4.11-3.62,5.26-.52.4-1.25.7-2.2.91-.95.2-1.68.45-2.2.73.35.29.8.49,1.38.6.57.12,1.12.23,1.64.34.81.46,1.64.96,2.5,1.51.86.55,1.47,1.19,1.81,1.94-.35.12-.71.06-1.08-.17-.38-.23-.59-.35-.65-.35-.23,0-.34.29-.34.86-.4.12-.89.46-1.47,1.04.17.06.34.09.52.09.23,0,.5-.1.82-.3.32-.2.59-.3.82-.3s.49.09.78.26c.06-.29.26-.55.6-.78.52,1.21.72,2.56.6,4.06-.06.75-.09,1.44-.09,2.07,0,.75.03,1.5.09,2.24Zm-24.42-14.32v-2.16c-.12-.75-.58-1.12-1.38-1.12-.34,0-.52.26-.52.78.57.17.92.52,1.04,1.04.17.69.46,1.18.86,1.47Zm3.97-28.47v2.93c-.12.98-.72,1.38-1.81,1.21-.92-.23-1.41-.52-1.47-.86l.52-.6c-.75-.29-1.15-1.18-1.21-2.67h3.97Zm5.69,10.53v-.69c-.23-.17-.43-.26-.6-.26l.6.95Zm2.07,17.08c-.34-.23-.55-.46-.6-.69-.98,0-1.5-.03-1.55-.09.29.52,1.01.78,2.16.78Zm-.95,20.62l-1.12-1.47-.09.17,1.21,1.29Zm13.63,12.08h-7.94c-.12-.46-.32-.69-.6-.69-.06,0-.16.03-.3.09-.14.06-.25.09-.3.09-.23,0-.43-.26-.6-.78-.12.46-.47.63-1.08.52-.6-.11-.99.03-1.17.43-1.55-1.04-2.27-2.56-2.16-4.57,1.55-1.21,2.93-1.73,4.14-1.55.11.06.23.09.34.09.17,0,.35-.11.52-.35,0-.29-.16-.46-.47-.52-.32-.06-.56-.2-.73-.43.4-.29.78-.43,1.12-.43.4,0,.8.26,1.21.78.69.98,1.35,1.67,1.98,2.07,1.38-.35,3.39-.92,6.04-1.73v6.99Zm-12.25-14.15l-.95-.78c.34.17.43.34.26.52-.06.06-.09.14-.09.26s.03.2.09.26c.17.12.4.03.69-.26Zm12.25,6.73c-.52.29-1.04.43-1.55.43-.29,0-.68-.07-1.17-.22-.49-.14-.91-.22-1.25-.22-.46,0-.95.12-1.47.35-.23-.06-.34-.17-.34-.35.06-.11.09-.23.09-.34.52-.23.78-.43.78-.6s-.17-.35-.52-.52c-.69-.29-1.05-.62-1.08-.99-.03-.37-.04-.68-.04-.91,0-.98.49-1.61,1.47-1.9.52,0,1.01.4,1.47,1.21.23.4.49.6.78.6.23,0,.49-.2.78-.6-.29-.23-.58-.43-.86-.6.35-.86.95-1.32,1.81-1.38.69,0,1.04-.35,1.04-1.04,0-.23-.06-.52-.17-.86l.26,7.94Zm-5.78-45.3c.17.06.49-.03.95-.26-.63,0-.95.09-.95.26Zm2.59-3.28l.26.95h.35l.6-.17c-.23-.52-.63-.78-1.21-.78Zm2.42,6.21v-.78l-.43,1.04.43-.26Z"/><path d="m306.46,56.07c0,2.13-.14,4.2-.43,6.21-.92,2.7-2.62,4.05-5.09,4.05-.69,0-1.71-.09-3.06-.26-1.35-.17-2.37-.26-3.06-.26-1.27,0-2.45.09-3.54.26-.86-.57-1.7-.8-2.5-.69.63.46,1,.66,1.12.6l-3.11.09v-22.35l-.26-.26h-26.57c-2.3-.98-3.57-2.13-3.8-3.45.46.06.69-.37.69-1.29-.35-.17-.55-.26-.6-.26l-.6,1.04c-.12-.46-.17-.83-.17-1.12,0-.23.06-.4.17-.52l.26-.26-.26-.35c-.06.06-.26.09-.6.09-.17-4.2-.29-8.48-.34-12.86-.12-6.21-.12-10.55,0-13.03.06-2.7,1.58-4.51,4.57-5.44h46.5v15.1h-25.45c-.12,1.15-.2,2.39-.26,3.71,0,1.38.14,2.62.43,3.71l21.83.09c2.76,1.27,4.03,3.36,3.8,6.3-.06,1.09-.09,2.16-.09,3.19,0,1.78.12,3.45.35,5-.46.12-.86.2-1.21.26l.6.78h.35c0,1.32.06,3.31.17,5.95.12,2.65.17,4.63.17,5.95Zm-23.81,10.01h-27.09v-15.1h26.92l.17,15.1Zm-26.23-29.42c.06-.34-.12-.63-.52-.86-.12.46.06.75.52.86Zm6.64-8.71c-1.55-1.78-3.74-3.05-6.56-3.8.86.29,1.91.92,3.15,1.9,1.24.98,2.37,1.61,3.41,1.9Zm-2.16,28.3c-.34-.06-.58.09-.69.43l.6.35c.06-.06.09-.32.09-.78Zm.6,6.64c.06-.23.09-.46.09-.69,0-.4-.14-.83-.43-1.29l.34,1.98Zm1.21-20.02l-.69-1.55-.6-.09,1.29,1.64Zm-.34,15.1v-.78l-.52-.17.52.95Zm9.66-15.96v-1.9c0-.23-.17-.5-.52-.82-.35-.32-.63-.47-.86-.47-.29,0-.46.2-.52.6.46.17.79.58.99,1.21.2.63.5,1.09.91,1.38Zm.26,12.6c-.63,0-.95.12-.95.35-.17,0,.14-.11.95-.35Zm2.85-2.24c-.17-.23-.52-.49-1.04-.78l.09,1.12h.34c.34,0,.55-.11.6-.35Zm1.9,1.29l-1.29-1.73c-.12.12-.17.26-.17.43,0,.92.35,1.38,1.04,1.38.12,0,.26-.03.43-.09Zm-.69,4.31v-.86l-.52.95.52-.09Zm1.04,2.76c-.06-.29-.2-.75-.43-1.38-.12-.23-.2-.35-.26-.35-.12,0-.2.32-.26.95.29.69.6.95.95.78Zm.78-37.96c-.06-.06-.32-.26-.78-.6-.23-.23-.35-.49-.35-.78.35.86.72,1.32,1.12,1.38Zm1.29-1.98c-.06-.11-.26-.23-.6-.35l-.09.69.69-.35Zm2.5-11.73c-.06,0-.16-.29-.3-.86-.14-.57-.45-.8-.91-.69l1.21,1.55Zm-.6,7.42c-.17,0-.26-.11-.26-.35s-.06-.34-.17-.34v1.21l.43-.52Zm5-3.97l.6.86.35-.09c-.23-.52-.55-.78-.95-.78Zm3.02,25.45c-.23-.06-.43-.09-.6-.09-.58,0-1.04.39-1.38,1.17-.34.78-.63,1.51-.86,2.2.81-.11,1.29-.59,1.47-1.42.17-.83.63-1.45,1.38-1.85Zm-.78-3.36c-.17,0-.46-.06-.86-.17v.35l.95-.26c0,.06-.03.09-.09.09Zm3.19,13.2c-.35-.11-.69-.17-1.04-.17-.46,0-1.47.35-3.02,1.04l4.06-.86Zm-.35-10.18c-.63-.29-1.12-.43-1.47-.43-.29,0-.49.06-.6.17-.12,0,.06.14.52.43.29.12.55.17.78.17.35,0,.6-.11.78-.35Zm1.04-4.14c-.12.23-.46.68-1.04,1.34-.58.66-.83,1.17-.78,1.51.4-.4.83-.86,1.29-1.38.46-.52.63-1.01.52-1.47Zm3.8-13.37c-.12-.35-.49-.95-1.12-1.81-.23.35-.43.52-.6.52-.12,0-.23-.09-.34-.26-.23-.46-.49-.66-.78-.6l-.26.35c.35.52.46.78.35.78.11,0,.29-.07.52-.22.23-.14.43-.22.6-.22.23,0,.4.17.52.52.23.63.6.95,1.12.95Zm-1.98,27.69c-.17-.17-.32-.26-.43-.26s-.17.09-.17.26h.6Zm1.38-33.48c.06-.23.03-.43-.09-.6l-.69.52.78.69c-.06-.17-.06-.37,0-.6Zm0,27.95l-.34-.69-.09,1.21.43-.52Z"/></svg>
                            </div>
                           <h1>$title</h1>
                       </div>
                       <div class="body">
                           <p>$greeting</p>
                           <p>$body</p>
                       </div>
                       <div class="footer">
                           <p>&copy; 2024 D-Cars. All rights reserved.</p>
                       </div>
                   </div>
               </body>
               </html>
               MESSAGE;


        return $template;
    }
}

if(!function_exists('validateEmail')) {

    function validateEmail(string $email)
    {
        return filter_var($email, FILTER_VALIDATE_EMAIL);
    }

}

if(!function_exists('emailExist')) {
    function emailExist(string $email) {
        global $connection;
    
        $query = "SELECT * FROM users WHERE email = '$email'";
        $result = mysqli_query($connection, $query);
    
        if(mysqli_num_rows($result) > 0) {
            return true;
        }
    
        return false;
    }
}


if(!function_exists('uniqueId')) {

    function uniqueId($length = 30) {

        $string = bin2hex(random_bytes(ceil($length / 2))); 
        $randomString = substr($string, 0, $length);

        $numDashes = max(1, min(5, strlen($string) - 1));
        $positions = range(1, strlen($string) - 1);
        shuffle($positions);
        $selectedPositions = array_slice($positions, 0, $numDashes);
        sort($selectedPositions);

        $result = '';
        $lastPos = 0;
        foreach ($selectedPositions as $pos) {
            $result .= substr($string, $lastPos, $pos - $lastPos) . '-';
            $lastPos = $pos;
        }
        $result .= substr($string, $lastPos);

        return $result;

    }
}


function email_verification_message($link) {

    $message = "
        <p>Please click the link below to verify your email address</p>
        <p style='text-align:center'> <a href='$link' class='button'>Verify your email address</a> </p>
    ";

    return $message;
}